# Snapshot report for `test/map-node-modules.test.js`

The actual snapshot is saved in `map-node-modules.test.js.snap`.

Generated by [AVA](https://avajs.dev).

## mapNodeModules() should be idempotent for file:///node_modules/app/index.js

> Snapshot 1

    {
      compartments: {
        'file:///node_modules/app/': {
          label: '$root$',
          location: 'file:///node_modules/app/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///node_modules/app/',
              module: './index.js',
            },
            app: {
              __createdBy: 'node-modules',
              compartment: 'file:///node_modules/pippo/',
              module: './index.js',
            },
          },
          name: 'app',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            app: {
              compartment: 'file:///node_modules/app/',
            },
            paperino: {
              compartment: 'file:///node_modules/paperino/',
            },
            pippo: {
              compartment: 'file:///node_modules/pippo/',
            },
          },
          sourceDirname: 'app',
          types: {},
        },
        'file:///node_modules/gambadilegno/': {
          label: 'pippo>gambadilegno',
          location: 'file:///node_modules/gambadilegno/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///node_modules/gambadilegno/',
              module: './index.js',
            },
            gambadilegno: {
              __createdBy: 'node-modules',
              compartment: 'file:///node_modules/topolino/',
              module: './index.js',
            },
          },
          name: 'gambadilegno',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            gambadilegno: {
              compartment: 'file:///node_modules/gambadilegno/',
            },
            topolino: {
              compartment: 'file:///node_modules/topolino/',
            },
          },
          sourceDirname: 'gambadilegno',
          types: {},
        },
        'file:///node_modules/goofy/': {
          label: 'paperino>topolino>goofy',
          location: 'file:///node_modules/goofy/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///node_modules/goofy/',
              module: './index.js',
            },
            goofy: {
              __createdBy: 'node-modules',
              compartment: 'file:///node_modules/goofy/',
              module: './index.js',
            },
          },
          name: 'goofy',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            goofy: {
              compartment: 'file:///node_modules/goofy/',
            },
          },
          sourceDirname: 'goofy',
          types: {},
        },
        'file:///node_modules/paperino/': {
          label: 'paperino',
          location: 'file:///node_modules/paperino/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///node_modules/paperino/',
              module: './index.js',
            },
            paperino: {
              __createdBy: 'node-modules',
              compartment: 'file:///node_modules/topolino/',
              module: './index.js',
            },
          },
          name: 'paperino',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            paperino: {
              compartment: 'file:///node_modules/paperino/',
            },
            topolino: {
              compartment: 'file:///node_modules/topolino/',
            },
          },
          sourceDirname: 'paperino',
          types: {},
        },
        'file:///node_modules/pippo/': {
          label: 'pippo',
          location: 'file:///node_modules/pippo/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///node_modules/pippo/',
              module: './index.js',
            },
            pippo: {
              __createdBy: 'node-modules',
              compartment: 'file:///node_modules/gambadilegno/',
              module: './index.js',
            },
          },
          name: 'pippo',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            gambadilegno: {
              compartment: 'file:///node_modules/gambadilegno/',
            },
            pippo: {
              compartment: 'file:///node_modules/pippo/',
            },
          },
          sourceDirname: 'pippo',
          types: {},
        },
        'file:///node_modules/topolino/': {
          label: 'paperino>topolino',
          location: 'file:///node_modules/topolino/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///node_modules/topolino/',
              module: './index.js',
            },
            topolino: {
              __createdBy: 'node-modules',
              compartment: 'file:///node_modules/goofy/',
              module: './index.js',
            },
          },
          name: 'topolino',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            goofy: {
              compartment: 'file:///node_modules/goofy/',
            },
            topolino: {
              compartment: 'file:///node_modules/topolino/',
            },
          },
          sourceDirname: 'topolino',
          types: {},
        },
      },
      entry: {
        compartment: 'file:///node_modules/app/',
        module: './index.js',
      },
      tags: [],
    }

## mapNodeModules() should be idempotent for fixtures-shortest-path/node_modules/app/index.js

> Snapshot 1

    {
      compartments: {
        'file:///test/fixtures-shortest-path/node_modules/app/': {
          label: '$root$',
          location: 'file:///test/fixtures-shortest-path/node_modules/app/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-shortest-path/node_modules/app/',
              module: './index.js',
            },
            app: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-shortest-path/node_modules/pippo/',
              module: './index.js',
            },
          },
          name: 'app',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            app: {
              compartment: 'file:///test/fixtures-shortest-path/node_modules/app/',
            },
            paperino: {
              compartment: 'file:///test/fixtures-shortest-path/node_modules/paperino/',
            },
            pippo: {
              compartment: 'file:///test/fixtures-shortest-path/node_modules/pippo/',
            },
          },
          sourceDirname: 'app',
          types: {},
        },
        'file:///test/fixtures-shortest-path/node_modules/gambadilegno/': {
          label: 'pippo>gambadilegno',
          location: 'file:///test/fixtures-shortest-path/node_modules/gambadilegno/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-shortest-path/node_modules/gambadilegno/',
              module: './index.js',
            },
            gambadilegno: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-shortest-path/node_modules/topolino/',
              module: './index.js',
            },
          },
          name: 'gambadilegno',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            gambadilegno: {
              compartment: 'file:///test/fixtures-shortest-path/node_modules/gambadilegno/',
            },
            topolino: {
              compartment: 'file:///test/fixtures-shortest-path/node_modules/topolino/',
            },
          },
          sourceDirname: 'gambadilegno',
          types: {},
        },
        'file:///test/fixtures-shortest-path/node_modules/goofy/': {
          label: 'paperino>topolino>goofy',
          location: 'file:///test/fixtures-shortest-path/node_modules/goofy/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-shortest-path/node_modules/goofy/',
              module: './index.js',
            },
            goofy: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-shortest-path/node_modules/goofy/',
              module: './index.js',
            },
          },
          name: 'goofy',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            goofy: {
              compartment: 'file:///test/fixtures-shortest-path/node_modules/goofy/',
            },
          },
          sourceDirname: 'goofy',
          types: {},
        },
        'file:///test/fixtures-shortest-path/node_modules/paperino/': {
          label: 'paperino',
          location: 'file:///test/fixtures-shortest-path/node_modules/paperino/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-shortest-path/node_modules/paperino/',
              module: './index.js',
            },
            paperino: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-shortest-path/node_modules/topolino/',
              module: './index.js',
            },
          },
          name: 'paperino',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            paperino: {
              compartment: 'file:///test/fixtures-shortest-path/node_modules/paperino/',
            },
            topolino: {
              compartment: 'file:///test/fixtures-shortest-path/node_modules/topolino/',
            },
          },
          sourceDirname: 'paperino',
          types: {},
        },
        'file:///test/fixtures-shortest-path/node_modules/pippo/': {
          label: 'pippo',
          location: 'file:///test/fixtures-shortest-path/node_modules/pippo/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-shortest-path/node_modules/pippo/',
              module: './index.js',
            },
            pippo: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-shortest-path/node_modules/gambadilegno/',
              module: './index.js',
            },
          },
          name: 'pippo',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            gambadilegno: {
              compartment: 'file:///test/fixtures-shortest-path/node_modules/gambadilegno/',
            },
            pippo: {
              compartment: 'file:///test/fixtures-shortest-path/node_modules/pippo/',
            },
          },
          sourceDirname: 'pippo',
          types: {},
        },
        'file:///test/fixtures-shortest-path/node_modules/topolino/': {
          label: 'paperino>topolino',
          location: 'file:///test/fixtures-shortest-path/node_modules/topolino/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-shortest-path/node_modules/topolino/',
              module: './index.js',
            },
            topolino: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-shortest-path/node_modules/goofy/',
              module: './index.js',
            },
          },
          name: 'topolino',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            goofy: {
              compartment: 'file:///test/fixtures-shortest-path/node_modules/goofy/',
            },
            topolino: {
              compartment: 'file:///test/fixtures-shortest-path/node_modules/topolino/',
            },
          },
          sourceDirname: 'topolino',
          types: {},
        },
      },
      entry: {
        compartment: 'file:///test/fixtures-shortest-path/node_modules/app/',
        module: './index.js',
      },
      tags: [],
    }

## mapNodeModules() should be idempotent for fixtures-optional-peer-dependencies/node_modules/app/index.js

> Snapshot 1

    {
      compartments: {
        'file:///test/fixtures-optional-peer-dependencies/node_modules/app/': {
          label: '$root$',
          location: 'file:///test/fixtures-optional-peer-dependencies/node_modules/app/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-optional-peer-dependencies/node_modules/app/',
              module: './index.js',
            },
            app: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-optional-peer-dependencies/node_modules/paperina/',
              module: './index.js',
            },
          },
          name: 'app',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            app: {
              compartment: 'file:///test/fixtures-optional-peer-dependencies/node_modules/app/',
            },
            paperina: {
              compartment: 'file:///test/fixtures-optional-peer-dependencies/node_modules/paperina/',
            },
          },
          sourceDirname: 'app',
          types: {},
        },
        'file:///test/fixtures-optional-peer-dependencies/node_modules/paperina/': {
          label: 'paperina',
          location: 'file:///test/fixtures-optional-peer-dependencies/node_modules/paperina/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-optional-peer-dependencies/node_modules/paperina/',
              module: './index.js',
            },
            paperina: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-optional-peer-dependencies/node_modules/paperina/',
              module: './index.js',
            },
          },
          name: 'paperina',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            paperina: {
              compartment: 'file:///test/fixtures-optional-peer-dependencies/node_modules/paperina/',
            },
          },
          sourceDirname: 'paperina',
          types: {},
        },
      },
      entry: {
        compartment: 'file:///test/fixtures-optional-peer-dependencies/node_modules/app/',
        module: './index.js',
      },
      tags: [],
    }

## mapNodeModules() should be idempotent for fixtures-missing-optional-peer-dependencies/node_modules/app/index.js

> Snapshot 1

    {
      compartments: {
        'file:///test/fixtures-missing-optional-peer-dependencies/node_modules/app/': {
          label: '$root$',
          location: 'file:///test/fixtures-missing-optional-peer-dependencies/node_modules/app/',
          modules: {
            '.': {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-missing-optional-peer-dependencies/node_modules/app/',
              module: './index.js',
            },
            app: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-missing-optional-peer-dependencies/node_modules/app/',
              module: './index.js',
            },
          },
          name: 'app',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'cjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: undefined,
          scopes: {
            app: {
              compartment: 'file:///test/fixtures-missing-optional-peer-dependencies/node_modules/app/',
            },
          },
          sourceDirname: 'app',
          types: {},
        },
      },
      entry: {
        compartment: 'file:///test/fixtures-missing-optional-peer-dependencies/node_modules/app/',
        module: './index.js',
      },
      tags: [],
    }

## mapNodeModules() should be idempotent for fixtures-policy/node_modules/app/index.js

> Snapshot 1

    {
      compartments: {
        '<ATTENUATORS>': {
          label: '<ATTENUATORS>',
          location: '<ATTENUATORS>',
          modules: {},
          name: '<ATTENUATORS>',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'mjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: {
            defaultAttenuator: undefined,
            packages: 'any',
          },
          scopes: {
            '@ohmyscope/bob': {
              compartment: 'file:///test/fixtures-policy/node_modules/@ohmyscope/bob/',
            },
            alice: {
              compartment: 'file:///test/fixtures-policy/node_modules/alice/',
            },
            eve: {
              compartment: 'file:///test/fixtures-policy/node_modules/eve/',
            },
            myattenuator: {
              compartment: 'file:///test/fixtures-policy/node_modules/myattenuator/',
            },
          },
          sourceDirname: 'app',
          types: {
            './index.js': 'mjs',
          },
        },
        'file:///test/fixtures-policy/node_modules/@ohmyscope/bob/': {
          label: '@ohmyscope/bob',
          location: 'file:///test/fixtures-policy/node_modules/@ohmyscope/bob/',
          modules: {
            '@ohmyscope/bob': {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-policy/node_modules/alice/',
              module: './index.js',
            },
            '@ohmyscope/bob/nested-export': {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-policy/node_modules/alice/',
              module: './index.js',
            },
          },
          name: '@ohmyscope/bob',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'mjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: {
            packages: {
              alice: true,
            },
          },
          scopes: {},
          sourceDirname: 'bob',
          types: {
            './index.js': 'mjs',
          },
        },
        'file:///test/fixtures-policy/node_modules/alice/': {
          label: 'alice',
          location: 'file:///test/fixtures-policy/node_modules/alice/',
          modules: {
            alice: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-policy/node_modules/alice/node_modules/carol/',
              module: './index.js',
            },
          },
          name: 'alice',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'mjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: {
            builtins: {
              builtin: {
                attenuate: 'myattenuator',
                params: [
                  'c',
                ],
              },
            },
            globals: {
              redPill: true,
            },
            packages: {
              'alice>carol': true,
            },
          },
          scopes: {
            alice: {
              compartment: 'file:///test/fixtures-policy/node_modules/alice/',
            },
            carol: {
              compartment: 'file:///test/fixtures-policy/node_modules/alice/node_modules/carol/',
            },
            hackity: {
              compartment: 'file:///test/fixtures-policy/node_modules/hackity/',
            },
          },
          sourceDirname: 'alice',
          types: {
            './index.js': 'mjs',
          },
        },
        'file:///test/fixtures-policy/node_modules/alice/node_modules/carol/': {
          label: 'alice>carol',
          location: 'file:///test/fixtures-policy/node_modules/alice/node_modules/carol/',
          modules: {
            carol: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-policy/node_modules/alice/node_modules/carol/',
              module: './index.js',
            },
          },
          name: 'carol',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'mjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: {
            globals: {
              purplePill: true,
            },
          },
          scopes: {
            carol: {
              compartment: 'file:///test/fixtures-policy/node_modules/alice/node_modules/carol/',
            },
          },
          sourceDirname: 'carol',
          types: {
            './index.js': 'mjs',
          },
        },
        'file:///test/fixtures-policy/node_modules/app/': {
          label: '$root$',
          location: 'file:///test/fixtures-policy/node_modules/app/',
          modules: {
            app: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-policy/node_modules/alice/',
              module: './index.js',
            },
          },
          name: 'app',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'mjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: {
            builtins: {
              builtin: {
                attenuate: 'myattenuator',
                params: [
                  'a',
                  'b',
                ],
              },
            },
            globals: {
              bluePill: true,
            },
            packages: {
              '@ohmyscope/bob': true,
              alice: true,
            },
          },
          scopes: {
            '@ohmyscope/bob': {
              compartment: 'file:///test/fixtures-policy/node_modules/@ohmyscope/bob/',
            },
            alice: {
              compartment: 'file:///test/fixtures-policy/node_modules/alice/',
            },
            app: {
              compartment: 'file:///test/fixtures-policy/node_modules/app/',
            },
            eve: {
              compartment: 'file:///test/fixtures-policy/node_modules/eve/',
            },
            myattenuator: {
              compartment: 'file:///test/fixtures-policy/node_modules/myattenuator/',
            },
          },
          sourceDirname: 'app',
          types: {
            './index.js': 'mjs',
          },
        },
        'file:///test/fixtures-policy/node_modules/eve/': {
          label: 'eve',
          location: 'file:///test/fixtures-policy/node_modules/eve/',
          modules: {
            eve: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-policy/node_modules/eve/',
              module: './index.js',
            },
          },
          name: 'eve',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'mjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: {},
          scopes: {
            eve: {
              compartment: 'file:///test/fixtures-policy/node_modules/eve/',
            },
            hackity: {
              compartment: 'file:///test/fixtures-policy/node_modules/hackity/',
            },
          },
          sourceDirname: 'eve',
          types: {
            './index.js': 'mjs',
          },
        },
        'file:///test/fixtures-policy/node_modules/hackity/': {
          label: 'eve>hackity',
          location: 'file:///test/fixtures-policy/node_modules/hackity/',
          modules: {
            hackity: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-policy/node_modules/hackity/',
              module: './index.js',
            },
          },
          name: 'hackity',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'mjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: {},
          scopes: {
            hackity: {
              compartment: 'file:///test/fixtures-policy/node_modules/hackity/',
            },
          },
          sourceDirname: 'hackity',
          types: {
            './index.js': 'mjs',
          },
        },
        'file:///test/fixtures-policy/node_modules/myattenuator/': {
          label: 'myattenuator',
          location: 'file:///test/fixtures-policy/node_modules/myattenuator/',
          modules: {
            myattenuator: {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-policy/node_modules/myattenuator/',
              module: './index.js',
            },
            'myattenuator/attenuate': {
              __createdBy: 'node-modules',
              compartment: 'file:///test/fixtures-policy/node_modules/myattenuator/',
              module: './index.js',
            },
          },
          name: 'myattenuator',
          parsers: {
            bytes: 'bytes',
            cjs: 'cjs',
            js: 'mjs',
            json: 'json',
            mjs: 'mjs',
            text: 'text',
          },
          policy: {},
          scopes: {},
          sourceDirname: 'myattenuator',
          types: {
            './index.js': 'mjs',
          },
        },
      },
      entry: {
        compartment: 'file:///test/fixtures-policy/node_modules/app/',
        module: './index.js',
      },
      tags: [],
    }
